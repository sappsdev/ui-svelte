@layer components {
    .bottomnav {
        @apply flex items-center justify-around;
        @apply bg-background text-on-background;
        @apply border-t border-muted;
        @apply shadow-lg;

        &.is-fixed {
            @apply fixed bottom-0 left-0 right-0 z-50;
            padding-bottom: env(safe-area-inset-bottom);
        }

        .bottomnav-item {
            @apply flex flex-col items-center justify-center gap-1;
            @apply flex-1 py-3 px-2;
            @apply cursor-pointer select-none outline-none;
            @apply transition-all duration-200;
            @apply relative;

            .bottomnav-icon-wrapper {
                @apply relative inline-flex;
            }

            .bottomnav-icon {
                @apply h-6 w-6 shrink-0;
                @apply transition-all duration-200;
            }

            .bottomnav-label {
                @apply text-xs font-medium whitespace-nowrap;
                @apply transition-all duration-200;
            }

            .bottomnav-badge {
                @apply absolute -top-1.5 -right-2;
                @apply min-w-4 h-4 px-1;
                @apply flex items-center justify-center;
                @apply text-[10px] font-bold;
                @apply bg-danger text-on-danger;
                @apply rounded-full;
            }

            &:hover {
                @apply bg-muted/50;
            }

            /* FAB Style */
            &.is-fab {
                @apply flex-none;

                &:hover {
                    @apply bg-transparent;
                }

                .bottomnav-icon-wrapper {
                    @apply w-12 h-12 -mt-6;
                    @apply flex items-center justify-center;
                    @apply bg-primary text-on-primary;
                    @apply rounded-full shadow-lg;
                    @apply transition-all duration-200;
                }

                .bottomnav-icon {
                    @apply h-6 w-6 text-on-primary;
                }

                &:hover .bottomnav-icon-wrapper {
                    @apply shadow-xl shadow-primary/30;
                    transform: translateY(-2px);
                }

                &:active .bottomnav-icon-wrapper {
                    transform: translateY(0);
                    @apply shadow-md;
                }
            }
        }

        /* Size Variants */
        &.is-sm {
            .bottomnav-item {
                @apply gap-0.5 py-2 px-1;

                .bottomnav-icon {
                    @apply h-5 w-5;
                }

                .bottomnav-label {
                    @apply text-[10px];
                }

                &.is-fab .bottomnav-icon-wrapper {
                    @apply w-10 h-10 -mt-5;
                }
            }
        }

        &.is-md {
            .bottomnav-item {
                @apply gap-1 py-3 px-2;

                .bottomnav-icon {
                    @apply h-6 w-6;
                }

                .bottomnav-label {
                    @apply text-xs;
                }
            }
        }

        &.is-lg {
            .bottomnav-item {
                @apply gap-1.5 py-4 px-3;

                .bottomnav-icon {
                    @apply h-7 w-7;
                }

                .bottomnav-label {
                    @apply text-sm;
                }

                &.is-fab .bottomnav-icon-wrapper {
                    @apply w-14 h-14 -mt-7;

                    .bottomnav-icon {
                        @apply h-7 w-7;
                    }
                }
            }
        }

        &.is-icon-only {
            .bottomnav-item {
                @apply gap-0;

                .bottomnav-icon {
                    @apply h-7 w-7;
                }
            }
        }

        /* Variant: Primary */
        &.is-primary {
            .bottomnav-item.is-active {
                @apply text-primary;

                .bottomnav-icon {
                    @apply text-primary;
                }

                .bottomnav-label {
                    @apply text-primary;
                }
            }

            .bottomnav-item.is-fab .bottomnav-icon-wrapper {
                @apply bg-primary;
            }
        }

        /* Variant: Secondary */
        &.is-secondary {
            .bottomnav-item.is-active {
                @apply text-secondary;

                .bottomnav-icon {
                    @apply text-secondary;
                }

                .bottomnav-label {
                    @apply text-secondary;
                }
            }

            .bottomnav-item.is-fab .bottomnav-icon-wrapper {
                @apply bg-secondary;
            }
        }

        /* Variant: Ghost - just color change, no indicator */
        &.is-ghost {
            .bottomnav-item.is-active {
                @apply text-on-surface;

                .bottomnav-icon {
                    @apply text-on-surface;
                }

                .bottomnav-label {
                    @apply text-on-surface font-semibold;
                }
            }
        }

        /* Variant: Line - underline indicator */
        &.is-line {
            .bottomnav-item {
                &::after {
                    content: '';
                    @apply absolute bottom-0 left-1/2 -translate-x-1/2;
                    @apply w-0 h-0.5 rounded-full;
                    @apply bg-primary;
                    @apply transition-all duration-200;
                }

                &.is-active {
                    @apply text-primary;

                    .bottomnav-icon {
                        @apply text-primary;
                    }

                    .bottomnav-label {
                        @apply text-primary;
                    }

                    &::after {
                        @apply w-8;
                    }
                }
            }
        }

        /* Solid modifier - adds background pill on active */
        &.is-solid {
            .bottomnav-item {
                @apply relative isolate;

                &::before {
                    content: '';
                    @apply absolute inset-x-2 top-1 bottom-1;
                    @apply rounded-xl;
                    @apply bg-transparent;
                    @apply transition-all duration-200;
                    z-index: -1;
                }
            }

            &.is-primary .bottomnav-item.is-active:not(.is-fab)::before {
                @apply bg-primary/10;
            }

            &.is-secondary .bottomnav-item.is-active:not(.is-fab)::before {
                @apply bg-secondary/10;
            }

            &.is-ghost .bottomnav-item.is-active:not(.is-fab)::before {
                @apply bg-muted;
            }

            &.is-line .bottomnav-item.is-active:not(.is-fab)::before {
                @apply bg-primary/10;
            }
        }
    }
}