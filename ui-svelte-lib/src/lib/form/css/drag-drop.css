@layer components {
	.drag-drop {
		@apply relative w-full;
		--dd-color: var(--color-muted);
		--dd-on-color: var(--color-on-muted);
	}

	.drag-drop.is-primary {
		--dd-color: var(--color-primary);
		--dd-on-color: var(--color-on-primary);
		--dd-soft: var(--color-soft-primary);
	}
	.drag-drop.is-secondary {
		--dd-color: var(--color-secondary);
		--dd-on-color: var(--color-on-secondary);
		--dd-soft: var(--color-soft-secondary);
	}
	.drag-drop.is-muted {
		--dd-color: var(--color-muted);
		--dd-on-color: var(--color-on-muted);
		--dd-soft: var(--color-soft-muted);
	}
	.drag-drop.is-success {
		--dd-color: var(--color-success);
		--dd-on-color: var(--color-on-success);
		--dd-soft: var(--color-soft-success);
	}
	.drag-drop.is-info {
		--dd-color: var(--color-info);
		--dd-on-color: var(--color-on-info);
		--dd-soft: var(--color-soft-info);
	}
	.drag-drop.is-danger {
		--dd-color: var(--color-danger);
		--dd-on-color: var(--color-on-danger);
		--dd-soft: var(--color-soft-danger);
	}
	.drag-drop.is-warning {
		--dd-color: var(--color-warning);
		--dd-on-color: var(--color-on-warning);
		--dd-soft: var(--color-soft-warning);
	}

	.drag-drop.is-horizontal {
		@apply flex gap-4 overflow-x-auto;
	}

	.drag-drop.is-vertical {
		@apply flex flex-col gap-4;
	}

	.drag-drop.is-disabled {
		@apply opacity-60 pointer-events-none;
	}

	.drag-drop.is-dragging {
		@apply select-none;
	}

	.drag-drop-group {
		@apply flex flex-col min-w-64 max-w-80;
	}

	.drag-drop.is-vertical .drag-drop-group {
		@apply min-w-full max-w-full;
	}

	.drag-drop-group-header {
		@apply flex items-center justify-between gap-2 px-3 py-2 mb-2 font-semibold;
	}

	.drag-drop-group-title {
		@apply truncate;
	}

	.drag-drop-group-count {
		@apply px-2 py-0.5 text-xs rounded-full;
		background: oklch(from var(--dd-color) l c h / 0.15);
	}

	.drag-drop-list {
		@apply flex flex-col gap-2 min-h-24 p-2 rounded-ui;
		@apply transition-colors duration-200;
	}
	.drag-drop.is-soft .drag-drop-list {
		background: oklch(from var(--dd-soft, var(--dd-color)) l c h / 0.5);
	}
	.drag-drop.is-solid .drag-drop-list {
		background: oklch(from var(--dd-color) l c h / 0.2);
	}
	.drag-drop.is-outlined .drag-drop-list {
		@apply border-2 border-dashed;
		border-color: oklch(from var(--dd-color) l c h / 0.3);
	}
	.drag-drop.is-ghost .drag-drop-list {
		@apply bg-transparent;
	}
	.drag-drop-item {
		@apply relative flex items-center gap-3 p-3 rounded-ui cursor-grab;
		@apply bg-surface border border-transparent;
		@apply transition-all duration-200;
		-webkit-touch-callout: none;
		-webkit-user-select: none;
		-webkit-tap-highlight-color: transparent;
	}

	.drag-drop-item:hover {
		border-color: oklch(from var(--dd-color) l c h / 0.2);
		@apply shadow-sm;
	}

	.drag-drop-item.is-dragging {
		@apply opacity-50 cursor-grabbing scale-[1.02] shadow-lg;
		border-color: oklch(from var(--dd-color) l c h / 0.3);
	}

	.drag-drop-item.is-drag-over {
		border-color: oklch(from var(--dd-color) l c h / 0.5);
	}

	.drag-drop-item.is-drag-over::before,
	.drag-drop-item.is-touch-drag-over::before {
		content: '';
		@apply absolute -top-1.5 left-0 right-0 h-0.5 rounded-full;
		background: var(--dd-color);
	}

	.drag-drop-item-content {
		@apply flex-1 min-w-0 truncate;
	}
	.drag-drop-handle {
		@apply shrink-0 opacity-30 cursor-grab;
		@apply transition-opacity duration-200;
	}

	.drag-drop-item:hover .drag-drop-handle {
		@apply opacity-60;
	}

	.drag-drop-handle svg {
		@apply size-4;
	}

	.drag-drop-empty {
		@apply flex items-center justify-center min-h-24 p-4;
		@apply text-sm opacity-50 text-center;
		@apply border-2 border-dashed rounded-ui;
		@apply transition-all duration-200;
		border-color: oklch(from var(--dd-color) l c h / 0.2);
	}

	.drag-drop-empty.is-drag-over {
		border-color: oklch(from var(--dd-color) l c h / 0.5);
		background: oklch(from var(--dd-color) l c h / 0.05);
	}

	.drag-drop.is-sm {
		.drag-drop-item {
			@apply p-2 gap-2 text-sm;
		}
		.drag-drop-handle svg {
			@apply size-3;
		}
		.drag-drop-group-header {
			@apply text-sm px-2 py-1;
		}
		.drag-drop-list {
			@apply gap-1.5 p-1.5;
		}
		.drag-drop-empty {
			@apply min-h-16 text-xs;
		}
	}

	.drag-drop.is-md {
		.drag-drop-item {
			@apply p-3 gap-3 text-base;
		}
		.drag-drop-handle svg {
			@apply size-4;
		}
		.drag-drop-group-header {
			@apply text-base px-3 py-2;
		}
		.drag-drop-list {
			@apply gap-2 p-2;
		}
	}

	.drag-drop.is-lg {
		.drag-drop-item {
			@apply p-4 gap-4 text-lg;
		}
		.drag-drop-handle svg {
			@apply size-5;
		}
		.drag-drop-group-header {
			@apply text-lg px-4 py-3;
		}
		.drag-drop-list {
			@apply gap-3 p-3;
		}
		.drag-drop-empty {
			@apply min-h-32;
		}
	}

	.drag-drop.is-touch-dragging {
		@apply select-none touch-none;
	}

	.drag-drop-item.is-touch-drag-over {
		border-color: oklch(from var(--dd-color) l c h / 0.5);
	}

	.drag-drop-ghost {
		@apply rounded-ui bg-surface;
		border: 1px solid oklch(from var(--dd-color) l c h / 0.3);
	}

	@media (pointer: coarse) {
		.drag-drop-item {
			touch-action: pan-y;
		}

		.drag-drop.is-touch-dragging .drag-drop-item {
			touch-action: none;
		}

		.drag-drop-handle {
			@apply opacity-50;
		}
	}
}
